!function(){"use strict";function n(){}function r(n){return"function"==typeof n}function t(n,r,t){t=t||!1;for(var e in n)n.hasOwnProperty(e)&&(r.hasOwnProperty(e)&&!t||(r[e]=n[e]));return r}var e,u=new Function("try{return this===global}catch(e){return false}")();!function(){var i={},o="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",f=o.length,l=function(){var n,r,t,e,u=[0];return function(i){for(i=i||"",n="",r=t=0,e=1;e>0;){if(t=u[r]+e,!(t>=f)){u[r]=t;break}u[r]=t-f,u[r+1]=u[r+1]||0,e=1,r++}for(r=0;r<u.length;r++)n=o.charAt(u[r])+n;return i+n}}(),a=function(e){var u={},i={},a=function(){for(var n="",r=5;r-- >0;)n+=o.charAt(f*Math.random()|0);return n}(),c=function(n,r,t,e){var u,o=[];if(r)(u=h(r))&&o.push(u.__fireEvent({type:t,target:null,source:n},e));else for(var f in i)i.hasOwnProperty(f)&&(u=i[f],o.push(u.__fireEvent({type:t,target:null,source:n},e)));return 0==o.length&&o.push(Promise.resolve(null)),Promise.all(o)},s=function(n,t,e){n=n||"",t=t||null,e=r(e)?e:null;var u=i[n];return u&&t&&e?(u.__regEvent(t,e),!0):!1},h=function(n){return u[n]||i[n]||null},v=function(){var n={};return{__fireEvent:function(r,t){var e=["*",r.type],u=[];return e.forEach(function(e){var i=n[e];Array.isArray(i)&&i.forEach(function(n){u.push(Promise.resolve(n.cb(r,t)))})}),0==u.length&&u.push(Promise.resolve(!0)),Promise.all(u)},__regEvent:function(r,t){r.split(",").forEach(function(r){n.hasOwnProperty(r)||(n[r]=[]),n[r].push({cb:t})})}}},p=function(n){var e={getId:function(){return n},on:function(t,e){for(var u=Array.prototype.slice.call(arguments),i=[],o=[],f=!1;u.length>0;){var l=u.shift();f||r(l)?(f=f||!0,o.push(l)):i.push(l)}return o.unshift(i.length>0?i.join(","):null),o.unshift(n),s.apply(null,o),this},fire:function(r,u){var i=Promise.resolve(this).then(function(){return c(n,null,r,u)});return t(e,i,!0)},fireTarget:function(r,u,i){var o=Promise.resolve(this).then(function(){return c(n,r,u,i)});return t(e,o,!0)}};return e},g=function(t,e){r(t)&&(e=t,t=void 0);var o=r(e),f=o?e:n,c=l(a),s=p(c);i[c]=v(),i[c]._interface=f(s)||{};var h=t||null;return h&&(u[h]=i[c]),s};return e=e||{},e.instantiate=g,e.fire=function(n,r){var u=Promise.resolve(this).then(function(){return c(null,null,n,r)});return t(e,u,!0)},e.fireTarget=function(n,r,u){var i=Promise.resolve(this).then(function(){return c(null,n,r,u)});return t(e,i,!0)},e.instance=function(n){var r=h(n);return r?r._interface:null},e},c=a();return e=function(n){return this instanceof e?void a(this):arguments.length>0?i[n]=i[n]||new pump:c},t(c,e,!0),u?void(module.exports=e):(e.prevPump=function(n){return function(){return n}}(window.pump||void 0),void(window.pump=e))}()}();
